Was quite difficult to debug so i stopped at some point. 
The book chapter, though, is about DMA, and the spidma.c module works nicely (at least, it worked well for spi2 display).
I'll probably return to the task later, since it's an interesting one.
